<form class="container" [formGroup]="invoiceForm" (ngSubmit)="saveInvoice()">
  <div class="card">
    <h3>{{ pagetitle }}</h3>
    <div class="card-header">
      <div class="card-body">
        <div class="row">
          <div class="col-lg-6">
            <div class="form-group">
              <label for="">Invoice No</label>
              <span class="text-danger">*</span>
              <input formControlName="invoiceNo" class="form-control" />
            </div>
          </div>

          <div class="col-lg-6">
            <div class="form-group">
              <label for="">Customer</label>
              <span class="text-danger">*</span>
              <input formControlName="customerId" (change)="customerChange()" />
              <select name="" id="">
                <option *ngFor="let item of customer" [value]="item.code">
                  {{ item.name }}
                </option>
              </select>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="form-group">
              <label for="">Address</label>
              <span class="text-danger">*</span>
              <textarea
                formControlName="deliveryAddress"
                class="form-control"
              ></textarea>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="form-group">
              <label for="">Remarks</label>
              <textarea
                formControlName="remarks"
                class="form-control"
              ></textarea>
            </div>
          </div>

          <div class="row">
            <div class="col-lg-12">
              <table class="table table-bordered" formArrayName="details">
                <thead class="bg-primary text-white">
                  <tr>
                    <td>Sl.No</td>
                    <td style="width: 20%">Product Code</td>
                    <td>Description</td>
                    <td>Qty</td>
                    <td>Price</td>
                    <td>Total</td>
                    <td>Action</td>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let item of InvProducts.controls; let i = index"
                    [formGroupName]="i"
                  >
                    <td>{{ i + 1 }}</td>
                    <td>
                      <select
                        class="form-control"
                        (change)="productChange(i)"
                        formControlName="productCode"
                      >
                        <option
                          *ngFor="let item of product"
                          [value]="item.code"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </td>

                    <td>
                      <input
                        class="form-control"
                        formControlName="productName"
                      />
                    </td>

                    <td>
                      <input class="form-control" formControlName="qty" />
                    </td>

                    <td>
                      <input
                        class="form-control"
                        formControlName="salesPrice"
                      />
                    </td>

                    <td>
                      <input class="form-control" formControlName="total" />
                    </td>

                    <td>
                      <a class="btn btn-danger">Remove</a>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td colpan-6>
                      <a (click)="addNewProduct()" class="btn btn-success"
                        >[+]</a
                      >
                    </td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
          <br />
          <div class="row">
            <div class="col-lg-4">
              <div class="form-group">
                <label>Summary Total</label>
                <input formControlName="total" class="form-control" />
              </div>
            </div>

            <div class="col-lg-4">
              <div class="form-group">
                <label>Summary Tax</label>
                <input formControlName="tax" class="form-control" />
              </div>
            </div>

            <div class="col-lg-4">
              <div class="form-group">
                <label>Summary NetTotal</label>
                <input formControlName="netTotal" class="form-control" />
              </div>
            </div>
            <br />
            <div class="col-lg-12">
              <button class="btn btn-success" type="submit">Save</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
